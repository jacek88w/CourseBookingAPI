@PostMapping("/register")
    public String registerUser(@RequestBody UserDTO userDTO, final HttpServletRequest request) {
           User user = userService.registerUser(userDTO);
           publisher.publishEvent(new RegistrationCompleteEvent(
                   user,
                   applicationUrl(request)
           ));
           return "Success";
    }


    public String create(UserDTO userDTO) {
            User user = new User();
            BeanUtils.copyProperties(userDTO, user);
            userRepository.save(user);
            return "User created with id: " + user.getId();
        }


    public User registerUser(UserDTO userDTO) {
            User user = new User();
            user.setEmail(userDTO.getEmail());
            user.setFirstName(userDTO.getFirstName());
            user.setLastName(userDTO.getLastName());
            user.setRole(Role.USER);
            user.setPassword(passwordEncoder.encode(userDTO.getPassword()));

            userRepository.save(user);
            return user;
        }